-- Unluckys Vision Loader v1.0
-- Multi-game loader with remote key system
-- Created by uzth

-- Remote key configuration
local KEY_REPO_URL = "https://raw.githubusercontent.com/realuzth/Vision-Keys/main/keys.json"
local validKeys = {}
local keyEntered = false
local keysLoaded = false

-- Services
local Services = {
    Players = game:GetService("Players"),
    UserInputService = game:GetService("UserInputService"),
    TweenService = game:GetService("TweenService"),
    HttpService = game:GetService("HttpService")
}

local player = Services.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Remote key fetching function
local function fetchValidKeys()
    local success, result = pcall(function()
        return game:HttpGet(KEY_REPO_URL)
    end)
    
    if success then
        local keyData = Services.HttpService:JSONDecode(result)
        validKeys = keyData.keys or {}
        keysLoaded = true
        print("üîë Keys loaded successfully from remote source")
        return true
    else
        print("‚ùå Failed to fetch keys from remote source")
        print("Error: " .. tostring(result))
        return false
    end
end

-- Key System UI
local function createKeyUI()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "UnluckysVisionKeySystem"
    screenGui.Parent = playerGui
    screenGui.ResetOnSpawn = false
    screenGui.IgnoreGuiInset = true
    screenGui.DisplayOrder = 999
    
    -- Main Frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "KeyFrame"
    mainFrame.Size = UDim2.new(0, 400, 0, 250)
    mainFrame.Position = UDim2.new(0.5, -200, 0.5, -125)
    mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = screenGui
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 12)
    mainCorner.Parent = mainFrame
    
    -- Header
    local header = Instance.new("Frame")
    header.Name = "Header"
    header.Size = UDim2.new(1, 0, 0, 50)
    header.Position = UDim2.new(0, 0, 0, 0)
    header.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    header.BorderSizePixel = 0
    header.Parent = mainFrame
    
    local headerCorner = Instance.new("UICorner")
    headerCorner.CornerRadius = UDim.new(0, 12)
    headerCorner.Parent = header
    
    local headerBottom = Instance.new("Frame")
    headerBottom.Size = UDim2.new(1, 0, 0, 12)
    headerBottom.Position = UDim2.new(0, 0, 1, -12)
    headerBottom.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    headerBottom.BorderSizePixel = 0
    headerBottom.Parent = header
    
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "Title"
    titleLabel.Size = UDim2.new(1, -20, 1, 0)
    titleLabel.Position = UDim2.new(0, 10, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = "üîê Unluckys Vision - Key System"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 16
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = header
    
    -- Content
    local contentFrame = Instance.new("Frame")
    contentFrame.Name = "Content"
    contentFrame.Size = UDim2.new(1, -40, 1, -90)
    contentFrame.Position = UDim2.new(0, 20, 0, 60)
    contentFrame.BackgroundTransparency = 1
    contentFrame.Parent = mainFrame
    
    local instructionLabel = Instance.new("TextLabel")
    instructionLabel.Name = "Instruction"
    instructionLabel.Size = UDim2.new(1, 0, 0, 30)
    instructionLabel.Position = UDim2.new(0, 0, 0, 0)
    instructionLabel.BackgroundTransparency = 1
    instructionLabel.Text = "Enter your access key to continue:"
    instructionLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    instructionLabel.Font = Enum.Font.Gotham
    instructionLabel.TextSize = 14
    instructionLabel.TextXAlignment = Enum.TextXAlignment.Left
    instructionLabel.Parent = contentFrame
    
    -- Key Input
    local keyInput = Instance.new("TextBox")
    keyInput.Name = "KeyInput"
    keyInput.Size = UDim2.new(1, 0, 0, 40)
    keyInput.Position = UDim2.new(0, 0, 0, 40)
    keyInput.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    keyInput.BorderSizePixel = 0
    keyInput.Text = ""
    keyInput.PlaceholderText = "Enter key here..."
    keyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
    keyInput.PlaceholderColor3 = Color3.fromRGB(120, 120, 120)
    keyInput.Font = Enum.Font.Gotham
    keyInput.TextSize = 14
    keyInput.ClearTextOnFocus = false
    keyInput.Parent = contentFrame
    
    local inputCorner = Instance.new("UICorner")
    inputCorner.CornerRadius = UDim.new(0, 6)
    inputCorner.Parent = keyInput
    
    -- Submit Button
    local submitButton = Instance.new("TextButton")
    submitButton.Name = "SubmitButton"
    submitButton.Size = UDim2.new(0, 120, 0, 35)
    submitButton.Position = UDim2.new(0.5, -60, 0, 95)
    submitButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
    submitButton.BorderSizePixel = 0
    submitButton.Text = "Submit Key"
    submitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    submitButton.Font = Enum.Font.GothamBold
    submitButton.TextSize = 14
    submitButton.Parent = contentFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = submitButton
    
    -- Status Label
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Name = "Status"
    statusLabel.Size = UDim2.new(1, 0, 0, 20)
    statusLabel.Position = UDim2.new(0, 0, 0, 140)
    statusLabel.BackgroundTransparency = 1
    statusLabel.Text = ""
    statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.TextSize = 12
    statusLabel.TextXAlignment = Enum.TextXAlignment.Center
    statusLabel.Parent = contentFrame
    
    -- Button hover effects
    submitButton.MouseEnter:Connect(function()
        Services.TweenService:Create(submitButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(20, 170, 255)
        }):Play()
    end)
    
    submitButton.MouseLeave:Connect(function()
        Services.TweenService:Create(submitButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(0, 150, 255)
        }):Play()
    end)
    
    -- Key validation function
    local function validateKey()
        if not keysLoaded then
            statusLabel.Text = "‚è≥ Loading keys... Please wait."
            statusLabel.TextColor3 = Color3.fromRGB(255, 255, 100)
            return
        end
        
        local enteredKey = keyInput.Text
        local isValidKey = false
        
        -- Check if entered key exists in valid keys list
        for _, validKey in ipairs(validKeys) do
            if enteredKey == validKey then
                isValidKey = true
                break
            end
        end
        
        if isValidKey then
            statusLabel.Text = "‚úÖ Key accepted! Loading script..."
            statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            keyEntered = true
            
            -- Set global validation variables
            _G.UnluckysVisionKeyValidated = true
            _G.UnluckysVisionKey = enteredKey
            
            -- Animate out
            Services.TweenService:Create(mainFrame, TweenInfo.new(0.5), {
                Size = UDim2.new(0, 0, 0, 0),
                Position = UDim2.new(0.5, 0, 0.5, 0)
            }):Play()
            
            task.wait(0.6)
            screenGui:Destroy()
            loadGame()
        else
            statusLabel.Text = "‚ùå Invalid key! Please try again."
            statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
            
            -- Shake animation
            local originalPos = mainFrame.Position
            Services.TweenService:Create(mainFrame, TweenInfo.new(0.1), {
                Position = UDim2.new(originalPos.X.Scale, originalPos.X.Offset + 10, originalPos.Y.Scale, originalPos.Y.Offset)
            }):Play()
            
            task.wait(0.1)
            Services.TweenService:Create(mainFrame, TweenInfo.new(0.1), {
                Position = UDim2.new(originalPos.X.Scale, originalPos.X.Offset - 10, originalPos.Y.Scale, originalPos.Y.Offset)
            }):Play()
            
            task.wait(0.1)
            Services.TweenService:Create(mainFrame, TweenInfo.new(0.1), {
                Position = originalPos
            }):Play()
        end
    end
    
    -- Connect events
    submitButton.MouseButton1Click:Connect(validateKey)
    keyInput.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            validateKey()
        end
    end)
    
    -- Animate in
    mainFrame.Size = UDim2.new(0, 0, 0, 0)
    mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    
    Services.TweenService:Create(mainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {
        Size = UDim2.new(0, 400, 0, 250),
        Position = UDim2.new(0.5, -200, 0.5, -125)
    }):Play()
end

-- Game loading function
function loadGame()
    if not keyEntered then
        print("‚ùå Access denied - Invalid key")
        return
    end
    
    local gameId = game.PlaceId
    print("üéÆ Detected Game ID: " .. tostring(gameId))
    
    if gameId == 74417977960860 then
        print("üîµ Loading Blue Lock script...")
        loadstring(game:HttpGet("https://raw.githubusercontent.com/realuzth/Vision-Hub/refs/heads/main/Steal%20a%20Blue%20Lock"))()
    elseif gameId == 128471721301059 then
        print("üêé Loading Uma Musume script...")
        loadstring(game:HttpGet("https://raw.githubusercontent.com/realuzth/Vision-Hub/refs/heads/main/Steal%20an%20uma"))()
    elseif gameId == 93944111684890 then
        print("üèê Loading Haikyuu script...")
        loadstring(game:HttpGet("https://raw.githubusercontent.com/realuzth/Vision-Hub/refs/heads/main/steal%20a%20haikyu"))()
    else
        print("‚ùå Game not supported")
        print("Supported games:")
        print("- Blue Lock (74417977960860)")
        print("- Uma Musume (128471721301059)")
        print("- Haikyuu (93944111684890)")
    end
end

-- Initialize
print("üîê Unluckys Vision Loader v1.0")
print("üîÑ Fetching valid keys from remote source...")

-- Fetch keys first, then create UI
spawn(function()
    if fetchValidKeys() then
        print("‚úÖ Remote keys loaded successfully")
        createKeyUI()
    else
        print("‚ùå Failed to load keys - Script cannot continue")
        print("Please check your internet connection and try again")
    end
end)
